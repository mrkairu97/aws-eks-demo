<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Server Info</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 40px; background: #f0f0f0; }
        .container { background: white; padding: 30px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .info { background: #e8f4fd; padding: 20px; border-radius: 5px; margin: 20px 0; }
        .region-banner { background: linear-gradient(45deg, #ff6b6b, #4ecdc4); color: white; padding: 20px; border-radius: 10px; text-align: center; margin: 20px 0; font-size: 24px; font-weight: bold; }
        .region-primary { background: linear-gradient(45deg, #2ecc71, #27ae60); }
        .region-dr { background: linear-gradient(45deg, #e74c3c, #c0392b); }
        img { max-width: 300px; border-radius: 10px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üöÄ Nginx Info Server</h1>
        
        <div id="region-banner" class="region-banner">
            üåè SERVING FROM: <span id="aws-region">UNKNOWN REGION</span>
        </div>
        
        <div class="info">
            <h3>Server Information:</h3>
            <p><strong>Hostname:</strong> <span id="hostname"></span></p>
            <p><strong>Server IP:</strong> <span id="server-ip"></span></p>
            <p><strong>Client IP:</strong> <span id="client-ip"></span></p>
            <p><strong>AWS Region:</strong> <span id="region-detail"></span></p>
        </div>
        <div style="text-align: center; margin: 20px 0;">
            <span style="font-size: 48px;">‚òÅÔ∏è</span>
            <span style="font-size: 48px;">üöÄ</span>
        </div>
        <p><em>Deployed on Amazon EKS</em></p>
    </div>
    
    <script>
        document.getElementById('hostname').textContent = window.location.hostname;
        fetch('/info')
            .then(response => response.json())
            .then(data => {
                document.getElementById('server-ip').textContent = data.server_ip;
                document.getElementById('client-ip').textContent = data.client_ip;
                
                // Display region information
                const region = data.aws_region || 'UNKNOWN';
                document.getElementById('aws-region').textContent = region;
                document.getElementById('region-detail').textContent = region;
                
                // Style the banner based on region
                const banner = document.getElementById('region-banner');
                if (region === 'ap-southeast-1') {
                    banner.className = 'region-banner region-primary';
                    banner.innerHTML = 'üü¢ PRIMARY REGION: ' + region + ' (Singapore)';
                } else if (region === 'ap-southeast-2') {
                    banner.className = 'region-banner region-dr';
                    banner.innerHTML = 'üî¥ DR REGION: ' + region + ' (Sydney)';
                } else {
                    banner.innerHTML = 'üåè SERVING FROM: ' + region;
                }
            })
            .catch(error => {
                console.error('Error fetching server info:', error);
                document.getElementById('aws-region').textContent = 'ERROR LOADING REGION';
            });
    </script>
</body>
</html>